<script type="text/javascript" src="Jmol.js"></script>
<table><tr><td>
<script type="text/javascript">
//jmolDebugAlert(true)
jmolInitialize(".","JmolApplet.jar")
jmolSetCallback("animFrameCallback", "myfunc2")
jmolSetCallback("loadStructCallback", "myfunc3")
jmolSetCallback("messageCallback", "myfunc4")
jmolSetCallback("hoverCallback", "myfunc")
jmolHtml("<div id=theApplet>" + (new Date()) + "<br />")
jmolApplet(400,"load data/1crn.pdb;isosurface sasurface;set hoverdelay 1.0")
jmolHtml("</div>")
jmolHtml("<br>")
jmolButton("initialize;load data/caffeine.xyz;","load")
jmolButton("if(dotsON);dots off;set dotsON false;else;dots on;set dotsON", "dots on/off");
jmolHtml("<br>")
jmolCommandInput("go",50)


function myfunc2(a,mess) {
 document.myform.mytextarea.value+="\nframe: "+mess
}

function myfunc3(a,mess) {
 document.myform.mytextarea.value+="\nload: "+mess
}

function myfunc4(a,mess) {
 //var v = jmolGetPropertyAsJSON("atominfo")
 document.myform.mytextarea.value+="\nmess: "+mess //+jmolDecodeJSON(v)
}

function myfunc(a,mess) {
  var msg
  var s = mess + ""  // NEVER operate on the 2nd parameter itself
  if (s.charAt(0) == 'C')
   msg = "yes, that is a carbon."
 else
   msg = "no, that is not a carbon. The carbons are grey."
  jmolScript('hover "'+msg+'"')
}

function createApplet() {
 document.myform.mytextarea.value = jmolEvaluate("_memory")
 _jmol.appletCount = 0;
 jmolSetDocument(0)
 document.getElementById("theApplet").innerHTML = (new Date()) + "<br />" + jmolApplet(400,"load data/1crn.pdb;isosurface sasurface;set hoverdelay 1.0")
}
</script>
</td><td width=300>
simple2.htm demonstrates:
<p>1) A simple way to provide feedback to an applet using callbacks to textarea and text elements. Click on atoms or press a button.
<p>2) The use of hover callbacks to customize hover text. Hover over a carbon atom first, then over a nitrogen atom.
<p>3) The use of jmolCommandInput() to add a simple command line to a page.
<p><form name=myform>
<table>
<tr><td>mytext:</td><td><input type=text name=mytext size=30></td></tr>
<tr><td>mytextarea:</td><td><textarea name=mytextarea cols=40 rows=5 wrap=off></textarea></td></tr>
<tr><td colspan=2>
<input type=button value="clear messages" onclick="document.myform.mytext.value=document.myform.mytextarea.value=''">
<input type=button value="console" onclick="jmolScript('console')">
<input type=button value="new applet" onclick="createApplet()">
</td></tr>
</table>
</form>
</table>
